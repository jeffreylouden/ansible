- name: flatpak | install | flatpak core
  become: true
  dnf:
    name: flatpak
- name: flatpak | config | add fedora remote
  become: true
  command: 'flatpak remote-add --if-not-exists --user fedora oci+https://registry.fedoraproject.org'
- name: flatpak | config | add flathub remote
  become: true
  command: 'flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo'
- name: flatpak | install | repair flatpak installation
  become: true
  command: flatpak repair --user
- name: flatpak | update | post-repair update flatpak
  become: true
  command: flatpak update
- name: flatpak | install | brave
  become: true
  command: 'flatpak install flathub com.brave.Browser --noninteractive'
- name: flatpak | install | discord
  become: true
  command: 'flatpak install flathub com.discordapp.Discord --noninteractive'
# TODO: (re)add Spotify and Slack flatpak installations
# The underlying issue seems to be with a required freedesktop packages that is
# no longer available. It's a infuriating ongoing issue, but it's worth trying
# to figure out and install flatpaks due to their easier updating process.
