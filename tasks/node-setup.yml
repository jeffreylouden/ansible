- name: Install nodejs and npm
  become: true
  dnf:
    name:
      - "nodejs"
      - "npm"
  tags:
    - install
    - node
- name: npmjs prefix
  command: mkdir -p "{{ ansible_user_dir }}/.local/.npm-global"
  tags:
    - install
    - node
# - name: add npmjs to path
#   shell: PATH=~/.local/.npm-global/bin:$PATH
#   tags:
#     - install
#     - node
- name: npmjs global settings
  command: npm config set prefix '{{ ansible_user_dir }}/.local/.npm-global'
  tags:
    - install
    - node
# - name: npmjs global settings export path in case I don't have dotfiles installed
#   shell: export PATH=~/.local/.npm-global/bin:$PATH
#   tags:
#     - install
#     - node
#     - npm-path
- name: Install N node manager
  npm:
    name: n
    global: true
  environment:
    PATH: '{{ ansible_user_dir }}/.local/.npm-global/bin:{{ ansible_env.PATH }}'
  tags:
    - install
    - node
- name: Install correct version of Node
  become: true
  command: n 16
  environment:
    PATH: '{{ ansible_user_dir }}/.local/.npm-global/bin:{{ ansible_env.PATH }}'
  tags:
    - install
    - node
